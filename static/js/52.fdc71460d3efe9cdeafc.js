webpackJsonp([52],{Uhc8:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("ts7I"),l=s("COTu"),n=s("8obM"),i=[{key:"MPI",display_name:"MPI"},{key:"CBA",display_name:"CBA"},{key:"GL",display_name:"GL"},{key:"RT",display_name:"RT"},{key:"IMI",display_name:"IMI"},{key:"IIA",display_name:"IIA"},{key:"CH",display_name:"CH"},{key:"BIO",display_name:"BIO"}],o=[{key:"1",display_name:"1"},{key:"2",display_name:"2"},{key:"3",display_name:"3"},{key:"4",display_name:"4"},{key:"5",display_name:"5"}],r=[{key:"1",display_name:"1"},{key:"2",display_name:"2"}],d={name:"groupsdetails",data:function(){return{id:this.$route.params.id,pathToStudent:"/Students/Student",addTestRef:"/tests/addtest",tableKey:0,studentList:null,testList:null,group:{fields:{}},temp:{pk:this.id,fields:{}},groupClassOptions:i,groupLevelOptions:o,groupGroupOptions:r,listLoading:!0,groupLoading:!0,testLoading:!0,groupQuery:{pk:this.$route.params.id},listQuery:{groupId:this.$route.params.id},testQuery:{groupId:this.$route.params.id}}},created:function(){this.getStudentList(),this.getGroupDetails(),this.getTestsList()},methods:{getStudentList:function(){var e=this;this.listLoading=!0,Object(a.d)(this.listQuery).then(function(t){console.log(t.data.students),e.studentList=t.data.students,e.total=t.data.students.length,e.listLoading=!1})},getGroupDetails:function(){var e=this;this.groupLoading=!0,Object(l.d)(this.groupQuery).then(function(t){e.group=JSON.parse(t.data.group)[0],e.groupLoading=!1})},getTestsList:function(){var e=this;this.testLoading=!0,Object(n.c)(this.testQuery).then(function(t){e.testList=t.data.tests,e.testLoading=!1})},handleDeleteTest:function(e){var t=this;Object(n.b)({id:e.pk}).then(function(s){var a=t.testList.indexOf(e);t.testList.splice(a,1),t.$notify({title:t.$t("test.successDeleteTitle"),message:t.$t("test.successDeleteMessage"),type:"success",duration:2e3})})},handleDeleteStudent:function(e){var t=this;Object(l.c)({groupId:this.$route.params.id,studentId:e.pk}).then(function(s){var a=t.studentList.indexOf(e);t.studentList.splice(a,1),t.$notify({title:t.$t("test.successDeleteStudentGroupTitle"),message:t.$t("test.successDeleteStudentGroupMessage"),type:"success",duration:2e3})})}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container "},[s("h2",[e._v(" Group Number "+e._s(e.id)+" ")]),e._v(" "),s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.groupLoading,expression:"groupLoading"}],ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,"element-loading-text":"loading",model:e.temp,"label-position":"left","label-width":"50%"}},[s("el-form-item",{attrs:{label:e.$t("groups.formadd.groupname")}},[s("el-input",{model:{value:e.group.fields.name,callback:function(t){e.$set(e.group.fields,"name",t)},expression:"group.fields.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("groups.formadd.groupclass")}},[s("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:e.group.fields.field,callback:function(t){e.$set(e.group.fields,"field",t)},expression:"group.fields.field"}},e._l(e.groupClassOptions,function(e){return s("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("groups.formadd.grouplevel")}},[s("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:e.group.fields.level,callback:function(t){e.$set(e.group.fields,"level",t)},expression:"group.fields.level"}},e._l(e.groupLevelOptions,function(e){return s("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("groups.formadd.groupgroup")}},[s("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:e.group.fields.group,callback:function(t){e.$set(e.group.fields,"group",t)},expression:"group.fields.group"}},e._l(e.groupGroupOptions,function(e){return s("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}))],1)],1),e._v(" "),s("h2",[e._v(" Tests List")]),e._v(" "),s("router-link",{attrs:{to:e.addTestRef}},[s("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.handleAddTest}},[e._v(e._s(e.$t("test.addTest")))])],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.testLoading,expression:"testLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.testList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{width:"150px",align:"center",label:e.$t("table.testName")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"150px",label:e.$t("table.testDescription")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.description))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"150px",label:e.$t("table.testMaxTime")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.max_time))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"150px",label:e.$t("table.testStartDate")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.start_date))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"150px",label:e.$t("table.testEndDate")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.end_date))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"150px",label:e.$t("table.testMaxGrade")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.max_grade))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:e.$t("table.actions"),width:"100","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(s){e.handleDeleteTest(t.row)}}},[e._v(e._s(e.$t("table.delete")))])]}}])})],1),e._v(" "),s("h2",[e._v(" Student List ")]),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.studentList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{width:"150px",align:"center",label:e.$t("table.studentName")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.first_name))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"150px",label:e.$t("table.studentLastName")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.last_name))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"150px",label:e.$t("table.studentCin")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.cin))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"150px",label:e.$t("table.studentEmail")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.email))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"150px",label:e.$t("table.studentTel")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.tel))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:e.$t("table.actions"),width:"150","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(s){e.handleDeleteStudent(t.row)}}},[e._v(e._s(e.$t("table.delete")))])]}}])})],1)],1)},staticRenderFns:[]},p=s("VU/8")(d,u,!1,null,null,null);t.default=p.exports}});