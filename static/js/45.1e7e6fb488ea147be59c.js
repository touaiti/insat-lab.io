webpackJsonp([45],{lmWb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("mvHQ"),o=n.n(a),s=n("Dd8w"),r=n.n(s),i=n("DZ6q"),l=n.n(i),c=n("COTu"),u=n("Zpx/"),p=n("NYxO"),d=n("ueJj"),f={name:"Presentation",components:{fetchGroupList:c.e},computed:r()({},Object(p.b)(["id"])),data:function(){return{presentationCover:l.a,dialogCreatePresentation:!1,groupList:[],temp:new d.a,loadingConfirm:!1,presentationList:[],rules:d.a.rules()}},created:function(){var t=this;this.getGroupList(),this.temp.userId=this.id,Object(u.d)().then(function(e){t.presentationList=e.data.presentations})},methods:{showDialog:function(){this.dialogCreatePresentation=!0},getGroupList:function(){var t=this;Object(c.e)().then(function(e){t.groupList=JSON.parse(e.data.groups)})},handleCreate:function(){var t=this;this.$refs.presentationForm.validate(function(e){e&&(t.loadingConfirm=!0,Object(u.a)(t.temp).then(function(e){t.dialogCreatePresentation=!1,t.loadingConfirm=!1,t.$notify({title:t.$t("test.createSuccessTitle"),message:t.$t("test.createSuccessMessage"),type:"success",duration:2e3}),t.$router.push({path:"/presentation/create/"+e.data})}).catch(function(){t.loadingConfirm=!1,t.$notify({title:t.$t("test.createErrorTitle"),message:t.$t("test.createErrorMessage"),type:"error",duration:2e3})}))})},handleDelete:function(t){var e=this,n={presentationId:t.pk};console.log(o()(n)),Object(u.b)(n).then(function(n){var a=e.presentationList.indexOf(t);e.presentationList.splice(a,1),e.$notify({title:e.$t("test.deleteSuccessTitle"),message:e.$t("test.deleteSuccessMessage"),type:"success",duration:2e3})}).catch(function(){})}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"text-center"},[n("img",{attrs:{src:t.presentationCover}}),t._v(" "),n("br"),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:t.showDialog}},[t._v(t._s(t.$t("presentation.createNew")))])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%","padding-top":"15px"},attrs:{data:t.presentationList}},[n("el-table-column",{attrs:{label:t.$t("table.presentationName")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.name)+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("table.presentationUser"),"show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t  "+t._s(e.row.user.first_name)+" "+t._s(e.row.user.last_name)+" \n\t\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("table.presentationGroup"),"show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t  "+t._s(e.row.group.name)+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Action",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"danger"},on:{click:function(n){t.handleDelete(e.row)}}},[t._v("\n                  Delete\n                ")]),t._v(" "),n("router-link",{attrs:{to:"/presentation/"+e.row.pk}},[n("el-button",{attrs:{type:"warning"}},[t._v("\n                  View\n                ")])],1)]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"Create New Presentation",visible:t.dialogCreatePresentation},on:{"update:visible":function(e){t.dialogCreatePresentation=e}}},[n("el-form",{ref:"presentationForm",attrs:{rules:t.rules,model:t.temp}},[n("el-form-item",{staticClass:"postInfo-container-item",attrs:{prop:"groupId","label-width":"50%",label:t.$t("presentation.formAdd.groupId")}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},model:{value:t.temp.groupId,callback:function(e){t.$set(t.temp,"groupId",e)},expression:"temp.groupId"}},t._l(t.groupList,function(t){return n("el-option",{key:t.key,attrs:{label:t.name,value:t.pk}})}))],1),t._v(" "),n("el-form-item",{staticClass:"postInfo-container-item",attrs:{prop:"name","label-width":"50%",label:t.$t("presentation.formAdd.presentationName")}},[n("el-input",{model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",loading:t.loadingConfirm},on:{click:t.handleCreate}},[t._v("Confirm")])],1)],1)],1)},staticRenderFns:[]},g=n("VU/8")(f,m,!1,null,null,null);e.default=g.exports}});